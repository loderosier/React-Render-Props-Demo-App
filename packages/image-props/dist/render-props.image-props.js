!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.ImageProps={},e.React)}(this,function(e,t){"use strict";function n(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e,t,n,r){try{e(n(r))}catch(e){t(e)}}function a(e){return this.then(void 0,e)}function o(){return this._canceled=!0,this}t=t&&t.hasOwnProperty("default")?t.default:t;var u,c,l=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=r,u=i,c=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._promise=new Promise(t),this._canceled=!1}return n(e,null,[{key:"all",value:function(t){return new e(function(e,n){Promise.all(t).then(e,n)})}},{key:"race",value:function(t){return new e(function(e,n){Promise.race(t).then(e,n)})}},{key:"reject",value:function(t){return new e(function(e,n){Promise.reject(t).then(e,n)})}},{key:"resolve",value:function(t){return new e(function(e,n){Promise.resolve(t).then(e,n)})}}]),n(e,[{key:"then",value:function(t,n){var r=this,i=new e(function(e,a){r._promise.then(function(n){r._canceled&&i.cancel(),t&&!r._canceled?u(e,a,t,n):e(n)},function(t){r._canceled&&i.cancel(),n&&!r._canceled?u(e,a,n,t):a(t)})});return i}},{key:"catch",value:a},{key:"cancel",value:o}]),e}();t.default=c}(u={exports:{}},u.exports),(c=u.exports)&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c);function s(e){return new l(function(t,n){!0===e.complete||e.naturalHeight>0?t({target:e}):(e.onload=t,e.onerror=n)})}function f(e){return e()}function h(e){return e([])}function d(e){var t=e.width,n=e.height;return t>n?"landscape":t===n?"square":"portrait"}function p(){null!==this.imageLoader&&this.imageLoader.cancel()}function m(){var e=this;null!==this.element&&(this.imageLoader=s(this.element),this.imageLoader.then(function(t){var n=t.target,r=n.width,i=n.height,a=n.naturalWidth,o=n.naturalHeight;e.setState({orientation:d({width:a,height:o}),width:r,height:i,naturalWidth:a,naturalHeight:o,complete:!0}),e.imageLoader=null}))}function g(){return this.props.children(Object.assign(this.statContext,this.state))}e.default=function(e){var t,n;function r(t){var n;return n=e.call(this,t)||this,Object.defineProperty(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),"imageRef",{configurable:!0,enumerable:!0,writable:!0,value:function(e){(e!==n.element||e&&n.element&&e.src!==n.element.src)&&(n.element=e,n.setStats())}}),n.element=null,n.imageLoader=null,n.state={orientation:"square",width:0,height:0,naturalWidth:0,naturalHeight:0,complete:!1},n.statContext={imageRef:n.imageRef},n}(t=r).prototype=Object.create((n=e).prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentWillUnmount=p,i.setStats=m,i.render=g,r}(t.Component),e.getOrientation=d,e.loadImage=s,e.loadImages=function(e){if(!e)return new l(f);var t=e.getElementsByTagName("img");if(null===t||0===t.length)return new l(h);for(var n=[],r=0;t.length>r;r++)n.push(s(t[r]));return l.all(n)},Object.defineProperty(e,"__esModule",{value:!0})});
